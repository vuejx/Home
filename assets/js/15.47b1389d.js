(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{230:function(t,a,e){"use strict";e.r(a);var n=e(0),s=Object(n.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"api-thong-ke-bao-cao"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-thong-ke-bao-cao","aria-hidden":"true"}},[t._v("#")]),t._v(" API thống kê báo cáo")]),t._v(" "),e("h2",{attrs:{id:"mo-ta-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mo-ta-api","aria-hidden":"true"}},[t._v("#")]),t._v(" Mô tả API")]),t._v(" "),e("h3",{attrs:{id:"dinh-nghia-bao-cao-cho-doi-tuong"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dinh-nghia-bao-cao-cho-doi-tuong","aria-hidden":"true"}},[t._v("#")]),t._v(" Định nghĩa báo cáo cho đối tượng")]),t._v(" "),e("p",[t._v("Phương thức: PUT")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("/core/restheart/<db>/<collection>\n")])])]),e("p",[t._v("Các tham số truy vấn:")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("db: Tên Database cần lấy dữ liệu.")])]),t._v(" "),e("li",[e("p",[t._v("collection: Tên Collection cần lấy dữ liệu.")])])]),t._v(" "),e("p",[t._v("Tham số Headers")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("Authorization: Mã xác thực Oauth2 ( access token ) nhận được khi đăng nhập hệ thống ( tuỳ chọn ).")])]),t._v(" "),e("li",[e("p",[t._v("token: Mã JSON Web Tokens ( JWT ) nhận được khi đăng nhập ( tuỳ chọn ).")])])]),t._v(" "),e("p",[t._v("Body: thêm 2 loại báo cáo dạng ( mapReduce và pipeline )")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{ \n   "aggrs":[ \n      { \n         "map":"function() { emit(this.shortName, 1) }",\n         "query":{ \n\n         },\n         "out":"order_totals",\n         "reduce":"function(key, count) { return Array.sum(count) }",\n         "type":"mapReduce",\n         "uri":"test_mr"\n      },\n      { \n         "type":"pipeline",\n         "uri":"test_pl",\n         "stages":[ \n            { \n               "_$group":{ \n                  "_id":"$shortName",\n                  "total":{ \n                     "_$sum":1\n                  }\n               }\n            }\n         ]\n      }\n   ]\n}\n')])])]),e("h2",{attrs:{id:"vi-du-mau"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vi-du-mau","aria-hidden":"true"}},[t._v("#")]),t._v(" Ví dụ mẫu")]),t._v(" "),e("p",[t._v("Câu truy vấn lấy dữ liệu thống kê theo")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("/core/restheart/<db>/<collection>/_aggrs/test_mr\n")])])]),e("p",[t._v("hoặc")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("/core/restheart/<db>/<collection>/_aggrs/test_pl\n")])])]),e("p",[t._v("kế quả trả về như sau:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n    "_id": "home",\n    "total": 2,\n    "_embedded": [\n        {\n            "_id": "home",\n            "total": 1\n        },\n        {\n            "_id": "test",\n            "total": 1\n        }\n    ],\n    "_size": 2,\n    "_total_pages": 1,\n    "_returned": 2\n}\n')])])]),e("h3",{attrs:{id:"du-lieu-goc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#du-lieu-goc","aria-hidden":"true"}},[t._v("#")]),t._v(" Dữ liệu gốc")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n    "_embedded": [\n        {\n            "_id": {\n                "$oid": "5d7266c33e78a2f92d23e9c5"\n            },\n            "shortName": "home",\n            "title": "Home"\n        },\n        {\n            "_id": {\n                "$oid": "5d7266c33e78a2f92d23e9c6"\n            },\n            "shortName": "test",\n            "title": "Test"\n        }\n    ],\n    "_size": 2,\n    "_total_pages": 1,\n    "_returned": 2\n}\n')])])])])}),[],!1,null,null,null);a.default=s.exports}}]);