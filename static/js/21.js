(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"0Hyj":function(e,t,a){"use strict";a.r(t);a("WTW0");var o=a("L2JU"),r=a("hUol"),n=a.n(r),i=(a("HEbw"),a("KFdL")),s=a.n(i);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t,a,o,r,n,i){try{var s=e[n](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function u(e){return function(){var t=this,a=arguments;return new Promise(function(o,r){var n=e.apply(t,a);function i(e){c(n,o,r,i,s,"next",e)}function s(e){c(n,o,r,i,s,"throw",e)}i(void 0)})}}n.a.options={closeButton:!0,timeOut:"15000"},window.Vue.use(s.a);var d={name:"default-screen-workflow",props:{constant:{type:Object,default:""},user:{type:Object,default:""},entity:{type:String,default:""},site:{type:String,default:"guest"},config:{type:Array,default:[]},title:{type:String,default:""},data:{type:Object,default:{_source:{}}}},data:function(){return{renderFlow:!0,workFlowSelected:"",cmOptions:{tabSize:4,mode:"text/javascript",theme:"base16-light",lineNumbers:!0,line:!0},scrollbarConfig:{suppressScrollX:!0},formDataSource:{},formData:{},rules:{required:function(e){return!!e||"Required."},number:function(e){return/^\d+$/.test(e)||"Invalid numeric."},email:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Invalid e-mail."}},language:"en",toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,undo:!0,redo:!0,alignleft:!0,aligncenter:!0,alignright:!0,preview:!0},dataSourceLoaded:!1,dataSourceLenght:0}},mounted:function(){var e=this;e.$nextTick(u(regeneratorRuntime.mark(function t(){var a,o,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a in e.renderFlow=!1,setTimeout(function(){e.renderFlow=!0},500),e.formData=e.data._source,null===e.data._source||void 0===e.data._source||!e.data._source.hasOwnProperty("order")||""!==e.data._source.order&&null!==e.data._source.order&&void 0!==e.data._source.order||(e.formData.order=0),e.formData.type=e.entity,e.formData.site=e.site,e.dataSourceLoaded=!1,e.dataSourceLenght=0,e.config)e.config[a].hasOwnProperty("dataSource")&&(e.dataSourceLenght=e.dataSourceLenght+1);0,o=regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dataSourceLoaded=!1,!e.config[a].hasOwnProperty("dataSource")){t.next=6;break}return t.next=4,e.pullDataSource({user:e.user,query:e.config[a].dataSource}).then(function(t){e.formDataSource[e.config[a].model+"_items"]=t});case 4:t.next=17;break;case 6:if(!e.config[a].hasOwnProperty("data")||"autocomplete"!==e.config[a].type){t.next=10;break}e.formDataSource[e.config[a].model+"_items"]=e.config[a].data,t.next=17;break;case 10:if("site"!==e.config[a].model){t.next=14;break}e.formData[e.config[a].model]=e.site,t.next=17;break;case 14:if(!e.config[a].hasOwnProperty("link")||"autocomplete"!==e.config[a].type){t.next=17;break}return t.next=17,e.pullDataGuest({user:e.user,entity:e.config[a].link,site:e.site,columns:e.config[a].link_columns,sort:e.config[a].link_sort}).then(function(t){e.formDataSource[e.config[a].model+"_items"]=t}).catch(function(e){console.error(e)});case 17:case"end":return t.stop()}},t)}),t.t0=regeneratorRuntime.keys(e.config);case 12:if((t.t1=t.t0()).done){t.next=17;break}return r=t.t1.value,t.delegateYield(o(r),"t2",15);case 15:t.next=12;break;case 17:e.dataSourceLoaded=!0;case 18:case"end":return t.stop()}},t)})))},beforeDestroy:function(){this.formData=null,this.formDataSource=null},methods:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},o=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),o.forEach(function(t){l(e,t,a[t])})}return e}({editNode:function(e){var t=this;this.renderFlow=!1,this.workFlowSelected=e,setTimeout(function(){t.renderFlow=!0},0)}},Object(o.b)("vuejx_manager",["updateData","addData","pullDataSource","pullDataGuest"]),{close:function(){this.$emit("close-event")},submit:function(){var e=this;console.log("vm.entityvm.entity",e.entity),console.log("vm.constantconstant",e.constant),void 0===e.formData.id||null===e.formData.id||""===e.formData.id?e.addData({user:e.user,body:e.formData,method:e.constant[e.entity].add}).then(function(t){e.$emit("submit-event",e.formData)}):e.updateData({user:e.user,body:e.formData,method:e.constant[e.entity].update}).then(function(t){e.$emit("submit-event",e.formData)})},increment:function(e){this.formData[e]=parseInt(this.formData[e])+1},decrement:function(e){this.formData[e]=parseInt(this.formData[e])-1},remove:function(){this.$emit("remove-event",this.formData)}})},m=a("KHd+"),f=Object(m.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",[a("perfect-scrollbar",{staticStyle:{height:"110vh"},attrs:{options:e.scrollbarConfig}},[a("v-toolbar",{staticStyle:{position:"sticky",top:"0","z-index":"9999"},attrs:{text:"",dark:"",color:"primary",height:"52"}},[e.formData.hasOwnProperty("shortName")?a("v-toolbar-items",[a("v-btn",{attrs:{text:"",icon:""},on:{click:e.remove}},[a("v-icon",[e._v("mdi-playlist-remove")])],1)],1):e._e(),e._v(" "),a("v-toolbar-title",{staticClass:"px-0 ml-2"},[e._v(e._s(""===e.title?"Add":e.title))]),e._v(" "),a("v-spacer"),e._v(" "),a("v-toolbar-items",[a("v-btn",{attrs:{text:"",icon:""},on:{click:e.close}},[a("v-icon",[e._v("mdi-window-close")])],1)],1)],1),e._v(" "),a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{staticStyle:{"border-right":"1px solid #e4e4e4"},attrs:{xs12:"",sm3:""}},[a("perfect-scrollbar",{staticStyle:{height:"90vh"},attrs:{options:e.scrollbarConfig}},[a("v-layout",{staticClass:"pa-4",attrs:{row:"",wrap:""}},e._l(e.config,function(t,o){return a("v-flex",{key:o,class:t.class},["workflow"===t.type?a("div",[e.renderFlow?a("vuejx-component-workflow",{attrs:{value:e.formData[t.model],selected:e.workFlowSelected},model:{value:e.formData[t.model],callback:function(a){e.$set(e.formData,t.model,a)},expression:"formData[item['model']]"}}):e._e(),e._v(" "),a("v-btn",{attrs:{block:"",color:"primary"},on:{click:e.submit}},[e._v("Save")])],1):e._e(),e._v(" "),"view"===t.type?a("div",[a("v-subheader",{staticClass:"vjx_label"},[e._v("\n                  "+e._s(t.label)+"\n                  "),t.required?a("font",{staticClass:"required__class"},[e._v("*")]):e._e()],1),e._v(" "),a("v-subheader",{staticClass:"vjx_label",staticStyle:{"font-weight":"normal"}},[e._v(e._s(void 0===e.data._source.createdAt?(new Date).toLocaleDateString():new Date(e.data._source.createdAt).toLocaleDateString()))])],1):e._e(),e._v(" "),"text"===t.type?a("div",[a("v-subheader",{staticClass:"vjx_label"},[e._v("\n                  "+e._s(t.label)+"\n                  "),t.required?a("font",{staticClass:"required__class"},[e._v("*")]):e._e()],1),e._v(" "),a("v-text-field",{staticClass:"v__border",attrs:{text:"",solo:""},model:{value:e.formData[t.model],callback:function(a){e.$set(e.formData,t.model,a)},expression:"formData[item['model']]"}})],1):e._e(),e._v(" "),"textarea"===t.type?a("div",[a("v-subheader",{staticClass:"vjx_label"},[e._v("\n                  "+e._s(t.label)+"\n                  "),t.required?a("font",{staticClass:"required__class"},[e._v("*")]):e._e()],1),e._v(" "),a("v-textarea",{staticClass:"v__border",attrs:{text:"",solo:"",rows:t.hasOwnProperty("rows")?t.rows:4},model:{value:e.formData[t.model],callback:function(a){e.$set(e.formData,t.model,a)},expression:"formData[item['model']]"}})],1):e._e(),e._v(" "),"number"===t.type?a("div",[a("v-subheader",{staticClass:"vjx_label"},[e._v("\n                  "+e._s(t.label)+"\n                  "),t.required?a("font",{staticClass:"required__class"},[e._v("*")]):e._e()],1),e._v(" "),a("v-text-field",{staticClass:"v__border_number",attrs:{type:"number",text:"",solo:"",rules:[e.rules.number],"append-icon":"mdi-window-close","append-outer-icon":"mdi-plus"},on:{"click:append-outer":function(a){return e.increment(t.model)},"click:append":function(a){return e.decrement(t.model)}},model:{value:e.formData[t.model],callback:function(a){e.$set(e.formData,t.model,a)},expression:"formData[item['model']]"}})],1):e._e(),e._v(" "),"autocomplete"===t.type?a("div",[a("v-subheader",{staticClass:"vjx_label"},[e._v("\n                  "+e._s(t.label)+"\n                  "),t.required?a("font",{staticClass:"required__class"},[e._v("*")]):e._e()],1),e._v(" "),e.dataSourceLoaded?a("v-autocomplete",{staticClass:"v__border",attrs:{loading:e.loading,items:e.formDataSource[t.model+"_items"],text:"",solo:"","hide-no-data":"","hide-details":"","item-text":t.itemText,"item-value":t.itemValue,multiple:!!t.multiple,"return-object":!!t.object,"small-chips":""},model:{value:e.formData[t.model],callback:function(a){e.$set(e.formData,t.model,a)},expression:"formData[item['model']]"}}):e._e()],1):e._e(),e._v(" "),"markdown"===t.type?a("div",[a("v-subheader",{staticClass:"vjx_label"},[e._v("\n                  "+e._s(t.label)+"\n                  "),t.required?a("font",{staticClass:"required__class"},[e._v("*")]):e._e()],1),e._v(" "),a("mavon-editor",{attrs:{toolbars:e.toolbars,language:e.language,boxShadow:!1,subfield:!1},model:{value:e.formData[t.model],callback:function(a){e.$set(e.formData,t.model,a)},expression:"formData[item['model']]"}})],1):e._e(),e._v(" "),"codemirror"===t.type?a("div",[a("v-subheader",{staticClass:"vjx_label"},[e._v("\n                  "+e._s(t.label)+"\n                  "),t.required?a("font",{staticClass:"required__class"},[e._v("*")]):e._e()],1),e._v(" "),"codemirror"===t.type?a("codemirror",{attrs:{options:e.cmOptions},model:{value:e.formData[t.model],callback:function(a){e.$set(e.formData,t.model,a)},expression:"formData[item['model']]"}}):e._e()],1):e._e()])}),1)],1)],1),e._v(" "),a("v-flex",{staticClass:"text-center pa-4",attrs:{xs12:"",sm9:""}},[a("perfect-scrollbar",{staticStyle:{height:"90vh"},attrs:{options:e.scrollbarConfig}},[a("div",[a("div",{attrs:{id:"mermaid"}},[a("vue-mermaid",{attrs:{nodes:e.formData.workFlows,type:"graph TD"},on:{nodeClick:e.editNode}})],1)])])],1)],1)],1)],1)],1)},[],!1,null,null,null);t.default=f.exports},3:function(e,t){},4:function(e,t){},Lw2E:function(e,t,a){var o={"./locale":"wCDk","./locale.js":"wCDk"};function r(e){var t=n(e);return a(t)}function n(e){if(!a.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id="Lw2E"}}]);